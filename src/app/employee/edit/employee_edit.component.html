<ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "medium" color = "#fff" type = "timer" [fullScreen] = "true"><p style="color: white" > Loading... </p></ngx-spinner>
<div class="page-breadcrumb">
    <div class="row">
        <div class="col-5 align-self-center">
            <h4 class="page-title">แก้ไขข้อมูลพนักงาน</h4>
            <div class="d-flex align-items-center">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
                        <li class="breadcrumb-item active" aria-current="page">แก้ไขข้อมูลพนักงาน</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
  </div>
  <br />
  <div class="container-fluid">
      <div class="row">
          <div class="col-12">
              <div class="card">
                  <div class="card-header card-header-cover-table">
                      <div class="row">
                          <div class="col-9">
                              ข้อมูลพนักงาน
                          </div>
                          <div class="col-3">
                          </div>
                      </div>
                  </div>
                  <div class="card-body">
                    <form [formGroup]="editForm" id="edit-form">
                    <fieldset class="border p-2 bg-tis-emp">
                    <legend class="w-auto legend-header" style="text-align: left;color: #1ab196;font-weight: bold;"> ข้อมูลส่วนตัว</legend>
                    <div class="row">
                        <div class="col-12">
                            <div *ngFor="let progressInfo of progressInfoProfiles" class="col-sm-12 col-md-12" style="margin-bottom: 10px;">
                                <span>{{ progressInfo.fileName }}</span>
                                <div class="progress" style="height: 40%;">
                                    <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar"
                                        attr.aria-valuenow="{{ progressInfo.value }}"
                                        aria-valuemin="0"
                                        aria-valuemax="100"
                                        [ngStyle]="{ width: progressInfo.value + '%' }">
                                        {{ progressInfo.value }}%
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> 
                    <div class="row">
                        <div class="col-2"></div>
                        <div class="col-4">
                            <div style="text-align: center;" class="m-t-30"> <img src="{{urlProfile}}" class="rounded-circle" width="220" />
                                <input type="file" class="form-control" (change)="selectFileProfile($event)" style="margin-top: 10px;margin-bottom: 10px;"/>
                            </div >
                        </div>
                        <div class="col-2" *ngIf="isHr">
                            <label>รหัสผ่าน </label>
                            <div class="form-group">
                                <input type="text" formControlName="password" class="form-control" disabled>
                            </div>
                        </div>
                        <div class="col-2">
                            <div class="form-group">
                                <label>ประเภทการเจนหุ้นลอย</label>
                                <select formControlName="share_type" class="form-control">
                                    <option value="" [selected]="true">ไม่ระบุ</option>
                                    <option value="EP">บุคคลภายนอก</option>
                                    <option value="IE">พนักงานภายใน</option>
                                    <option value="SG">รปภ</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-2">
                            <span *ngIf="status == 'O'" style="font-size: 20px;">สถานะ:<span style="color: red;font-size: 20px;">ลาออก</span></span>
                            <span *ngIf="status == 'A'" style="font-size: 20px;">สถานะ:<span style="color: green;font-size: 20px;">ปกติ</span></span>
                            <span *ngIf="status == 'P'" style="font-size: 20px;">สถานะ:<span style="color: orange;font-size: 20px;">รอจบอบรม</span></span>
                        </div>
                    </div> 
                    <div class="row">
                          <div class="col-sm-12 col-md-2">
                            <label>คำนำหน้าชื่อ </label>
                            <div class="form-group">
                                <select class="form-control" formControlName="prefix" (change)="preFixChange($event.target.value)">
                                    <option value="">ไม่ระบุ</option>
                                    <option *ngFor="let item of prefixList" value="{{item.data_value}}">{{item.data_value}}</option>
                                </select> 
                            </div>
                          </div>
                          <div class="col-sm-12 col-md-2">
                            <label>ชื่อ <span class="star-required">*</span></label>
                            <div class="form-group">
                                <input type="text" formControlName="first_name" class="form-control" placeholder="" [ngClass]="{ 'is-invalid': submitted_add && editForm.controls.first_name.errors }">
                                <div *ngIf="submitted_add && editForm.controls.first_name.errors" class="text-danger">
                                    <div *ngIf="editForm.controls.first_name.errors.required">โปรดระบุชื่อ</div>
                                </div>
                            </div>
                          </div>
                          <div class="col-sm-12 col-md-2">
                            <label>นามสกุล <span class="star-required">*</span></label>
                            <div class="form-group">
                                <input type="text" formControlName="last_name" class="form-control" placeholder="" [ngClass]="{ 'is-invalid': submitted_add && editForm.controls.last_name.errors }">
                                <div *ngIf="submitted_add && editForm.controls.last_name.errors" class="text-danger">
                                    <div *ngIf="editForm.controls.last_name.errors.required">โปรดระบุนามสกุล</div>
                                </div>
                            </div>
                          </div>
                          <div class="col-sm-12 col-md-2">
                            <label>First name </label>
                            <div class="form-group">
                                <input type="text" formControlName="first_name_en" class="form-control" placeholder="" >
                            </div>
                          </div>
                          <div class="col-sm-12 col-md-2">
                            <label>Last name </label>
                            <div class="form-group">
                                <input type="text" formControlName="last_name_en" class="form-control" placeholder="" >
                            </div>
                          </div>
                        <div class="col-sm-12 col-md-2">
                            <label>ชื่อเล่น </label>
                            <div class="form-group">
                                <input type="text" formControlName="nick_name" class="form-control" placeholder="">
                            </div>
                          </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-md-2">
                            <div class="form-group">
                                <label>เพศ</label>
                                <select formControlName="gender" class="form-control">
                                    <option value="N" [selected]="true">ไม่ระบุ</option>
                                    <option value="M">ชาย</option>
                                    <option value="F">หญิง</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-3">
                            <label>วันเกิด <span class="star-required">*</span></label>
                            <div class="row">
                                <div class="col-3">
                                    <select class="form-control" formControlName="date_of_birth_d" placeholder="" [ngClass]="{ 'is-invalid': submitted_add && editForm.controls.date_of_birth_d.errors }">
                                        <option *ngFor="let item of dayList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                                <div class="col-4">
                                    <select class="form-control" formControlName="date_of_birth_m" placeholder="" [ngClass]="{ 'is-invalid': submitted_add && editForm.controls.date_of_birth_m.errors }">
                                        <option *ngFor="let item of monthList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                                <div class="col-3">
                                    <select class="form-control" formControlName="date_of_birth_y" placeholder="" [ngClass]="{ 'is-invalid': submitted_add && editForm.controls.date_of_birth_y.errors }">
                                        <option *ngFor="let item of yearList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                            </div> 
                        </div>
                        <div class="col-sm-12 col-md-4">
                            <label>บัตรประชาชน <span class="star-required">*</span></label>
                            <div class="form-group">
                                <input type="text" formControlName="identity_no" class="form-control" placeholder="" [ngClass]="{ 'is-invalid': submitted_add && editForm.controls.identity_no.errors }">
                                <div *ngIf="submitted_add && editForm.controls.identity_no.errors" class="text-danger">
                                    <div *ngIf="editForm.controls.identity_no.errors.required">โปรดระบุบัตรประชาชน</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-3">
                            <label>บัตรหมดอายุ </label>
                            <div class="row">
                                <div class="col-3">
                                    <select class="form-control" formControlName="expired_card_d" placeholder="">
                                        <option *ngFor="let item of dayList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                                <div class="col-4">
                                    <select class="form-control" formControlName="expired_card_m" placeholder="">
                                        <option *ngFor="let item of monthList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                                <div class="col-3">
                                    <select class="form-control" formControlName="expired_card_y" placeholder="">
                                        <option *ngFor="let item of yearExpiredList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                            </div> 
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-md-4">
                            <label>เชื้อชาติ </label>
                            <div class="form-group">
                                <select class="form-control" formControlName="ethnicity">
                                    <option value="">ไม่ระบุ</option>
                                    <option *ngFor="let item of ethnicityList" value="{{item.data_value}}">{{item.data_value}}</option>
                                </select> 
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-4">
                            <label>สัญชาติ </label>
                            <select class="form-control" formControlName="nationality">
                                <option value="">ไม่ระบุ</option>
                                <option *ngFor="let item of nationalityList" value="{{item.data_value}}">{{item.data_value}}</option>
                            </select> 
                        </div>
                        <div class="col-sm-12 col-md-4">
                            <label>ศาสนา </label>
                            <select class="form-control" formControlName="religion">
                                <option value="">ไม่ระบุ</option>
                                <option *ngFor="let item of religionList" value="{{item.data_value}}">{{item.data_value}}</option>
                            </select> 
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-md-4">
                            <label>เบอร์โทรศัพท์ </label>
                            <div class="form-group">
                                <input type="text" formControlName="mobile" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-4">
                            <label>บุคคลอ้างอิง (ชื่อ-นามสกุล,ความสัมพันธ์,เบอร์โทรศัพท์)</label>
                            <div class="form-group">
                                <input type="text" formControlName="personnel_ref" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-4">
                            <label>อีเมล์ </label>
                            <div class="form-group">
                                <input type="text" formControlName="email" class="form-control" placeholder="">
                            </div>
                        </div> 
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-md-4">
                            <label>เลขที่บัญชีธนาคาร </label>
                            <div class="form-group">
                                <input type="text" formControlName="bank_account_no" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-4">
                            <label>น้ำหนัก </label>
                            <div class="form-group">
                                <input type="number" formControlName="weight" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-4">
                            <label>ส่วนสูง </label>
                            <div class="form-group">
                                <input type="number" formControlName="height" class="form-control" placeholder="">
                            </div>
                        </div> 
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-md-4">
                            <div class="form-group">
                                <label>สถานภาพ</label>
                                <select formControlName="marital_status" class="form-control">
                                    <option value="N" [selected]="true">ไม่ระบุ</option>
                                    <option value="M">แต่งงานแล้ว</option>
                                    <option value="S">โสด</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    </fieldset>
                    <fieldset class="border p-2">
                    <legend  class="w-auto legend-header" style="text-align: left;color: #1ab196;font-weight: bold;"> ข้อมูลที่อยู่</legend>
                    <div class="row">
                        <div class="col-sm-12 col-md-4">
                            <label>ที่อยู่ <span class="star-required">*</span></label>
                            <div class="form-group">
                                <input type="text" formControlName="address_detail" class="form-control" placeholder="ที่อยู่ เช่น บ้านเลขที่ หมู่บ้าน หมู่ที่ ..." [ngClass]="{ 'is-invalid': submitted_add && editForm.controls.address_detail.errors }">
                                <div *ngIf="submitted_add && editForm.controls.address_detail.errors" class="text-danger">
                                    <div *ngIf="editForm.controls.address_detail.errors.required">โปรดระบุที่อยู่</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-4">
                            <label>ลักษณะที่อยู่ </label>
                            <div class="form-group">
                                <input type="text" formControlName="address_type" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-4">
                            <div class="form-group">
                                <label>จังหวัด <span class="star-required">*</span></label>
                                <select formControlName="provinceMain" class="form-control" (change)="getAmphur($event.target.value)" [ngClass]="{ 'is-invalid': submitted_add && editForm.controls.provinceMain.errors }">
                                    <option value="" [selected]="true">--- เลือกจังหวัด ---</option>
                                    <option *ngFor="let province of countryJson; let count = index;" value="{{count}}|{{province[0]}}">{{province[0]}}</option>
                                </select>
                                <div *ngIf="submitted_add && editForm.controls.provinceMain.errors" class="text-danger">
                                    <div *ngIf="editForm.controls.provinceMain.errors.required">โปรดเลือกจังหวัด</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-md-4">
                            <div class="form-group">
                                <label>อำเภอ <span class="star-required">*</span></label>
                                <select formControlName="amphurMain" class="form-control" (change)="getThumbon($event.target.value)" [ngClass]="{ 'is-invalid': submitted_add && editForm.controls.amphurMain.errors }">
                                    <option value="" [selected]="true">--- เลือกอำเภอ ---</option>
                                    <option *ngFor="let amphur of amphurJson; let count = index;" value="{{count}}|{{amphur[0]}}">{{amphur[0]}}</option>
                                </select>
                                <div *ngIf="submitted_add && editForm.controls.amphurMain.errors" class="text-danger">
                                    <div *ngIf="editForm.controls.amphurMain.errors.required">โปรดเลือกอำเภอ</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-4">
                            <div class="form-group">
                                <label>ตำบล <span class="star-required">*</span></label>
                                <select formControlName="thumbonMain" class="form-control" (change)="getPost($event.target.value)" [ngClass]="{ 'is-invalid': submitted_add && editForm.controls.thumbonMain.errors }">
                                    <option value="" [selected]="true">--- เลือกตำบล ---</option>
                                    <option *ngFor="let thumbon of thumbonJson; let count = index;" value="{{count}}|{{thumbon[0]}}">{{thumbon[0]}}</option>
                                </select>
                                <div *ngIf="submitted_add && editForm.controls.thumbonMain.errors" class="text-danger">
                                    <div *ngIf="editForm.controls.thumbonMain.errors.required">โปรดเลือกตำบล</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-4">
                            <div class="form-group">
                                <label>รหัสไปรษณีย์ <span class="star-required">*</span></label>
                                <input type="text" formControlName="postcode" class="form-control" [ngClass]="{ 'is-invalid': submitted_add && editForm.controls.postcode.errors }">
                                <div *ngIf="submitted_add && editForm.controls.postcode.errors" class="text-danger">
                                      <div *ngIf="editForm.controls.postcode.errors.required">โปรดระบุรหัสไปรษณีย์</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </fieldset>
                    <fieldset class="border p-2 bg-tis-emp">
                    <legend  class="w-auto legend-header" style="text-align: left;color: #1ab196;font-weight: bold;"> ข้อมูลอื่นๆ</legend>
                    <div class="row">
                        <div class="col-sm-12 col-md-4">
                            <div class="form-group">
                                <label>บริษัท <span class="star-required">*</span></label>
                                <select class="form-control" formControlName="company_id" (change)="getDepartmentByCompanyId($event.target.value)" [ngClass]="{ 'is-invalid': submitted_add &amp;&amp; editForm.controls.company_id.errors }">
                                    <option value="">กรุณาเลือก</option>
                                    <option *ngFor="let item of companyList" value="{{item.id}}">{{item.name}}</option>
                                </select> 
                                <div *ngIf="submitted_add &amp;&amp; editForm.controls.company_id.errors" class="text-danger">
                                    <div *ngIf="editForm.controls.company_id.errors.required">โปรดระบุบริษัท</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-4">
                            <div class="form-group">
                                <label>แผนกงาน <span class="star-required">*</span></label>
                                <select class="form-control" formControlName="department_id" (change)="getPositionByDepartmentId($event.target.value)" [ngClass]="{ 'is-invalid': submitted_add &amp;&amp; editForm.controls.department_id.errors }">
                                    <option value="">กรุณาเลือก</option>
                                    <option *ngFor="let item of departmentList;" value="{{item.id}}">{{item.name}}</option>
                                </select>
                                <div *ngIf="submitted_add &amp;&amp; editForm.controls.department_id.errors" class="text-danger">
                                    <div *ngIf="editForm.controls.department_id.errors.required">โปรดระบุแผนกงาน</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-4">
                            <div class="form-group">
                                <label>ตำแหน่ง <span class="star-required">*</span></label>
                                <select class="form-control" formControlName="position_id" [ngClass]="{ 'is-invalid': submitted_add &amp;&amp; editForm.controls.position_id.errors }">
                                    <option value="">กรุณาเลือก</option>
                                    <option *ngFor="let item of positionList;" value="{{item.id}}">{{item.name}}</option>
                                </select>
                                <div *ngIf="submitted_add &amp;&amp; editForm.controls.position_id.errors" class="text-danger">
                                    <div *ngIf="editForm.controls.position_id.errors.required">โปรดระบุตำแหน่ง</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-md-4">
                            <label>ภาวะทางทหาร </label>
                            <div class="form-group">
                                <input type="text" formControlName="military_condition" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-4">
                            <label>ระดับการศึกษา </label>
                            <select class="form-control" formControlName="education_level">
                                <option value="">ไม่ระบุ</option>
                                <option *ngFor="let item of educationLevelList" value="{{item.data_value}}">{{item.data_value}}</option>
                            </select> 
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-md-3">
                            <label>โรงพยาบาล1 </label>
                            <div class="form-group">
                                <input type="text" formControlName="hospital1" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-3">
                            <label>จบลงหน่วยงาน </label>
                            <div class="form-group">
                                <input type="text" formControlName="end_agency" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div *ngIf="status == null || (status == 'O' || status == 'P') " class="col-sm-12 col-md-3">
                            <label>วันที่จบการอบรม </label>
                            <div class="row">
                                <div class="col-3">
                                    <select class="form-control" formControlName="start_work_d" placeholder="">
                                        <option *ngFor="let item of dayList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                                <div class="col-4">
                                    <select class="form-control" formControlName="start_work_m" placeholder="">
                                        <option *ngFor="let item of monthList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                                <div class="col-3">
                                    <select class="form-control" formControlName="start_work_y" placeholder="">
                                        <option *ngFor="let item of yearList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                            </div>
                            <!--<div class="form-group">
                                <input type="text" formControlName="start_work" class="form-control" placeholder="" [ngClass]="{ 'is-invalid': submitted_add && editForm.controls.start_work.errors }"
                                name="daterangeInput" daterangepicker [options]="options" (selected)="selectedStartWork($event, daterange)" />
                                <div *ngIf="submitted_add &amp;&amp; editForm.controls.start_work.errors" class="text-danger">
                                    <div *ngIf="editForm.controls.start_work.errors.required">โปรดระบุวันที่จบการอบรมเพื่อปรับสถานะกลับเข้าทำงาน</div>
                                </div>
                            </div>-->
                        </div>
                        <div *ngIf="status == null || (status == 'A') " class="col-sm-12 col-md-3">
                            <label>วันที่ออกจากงาน </label>
                            <div class="row">
                                <div class="col-3">
                                    <select class="form-control" formControlName="leave_work_d" placeholder="">
                                        <option *ngFor="let item of dayList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                                <div class="col-4">
                                    <select class="form-control" formControlName="leave_work_m" placeholder="">
                                        <option *ngFor="let item of monthList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                                <div class="col-3">
                                    <select class="form-control" formControlName="leave_work_y" placeholder="">
                                        <option *ngFor="let item of yearList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                            </div> 
                            <!--<div class="form-group">
                                <input type="text" formControlName="leave_work" class="form-control" placeholder="" [ngClass]="{ 'is-invalid': submitted_add && editForm.controls.leave_work.errors }"
                                name="daterangeInput" daterangepicker [options]="options" (selected)="selectedLeaveWork($event, daterange)" />
                                <div *ngIf="submitted_add &amp;&amp; editForm.controls.leave_work.errors" class="text-danger">
                                    <div *ngIf="editForm.controls.leave_work.errors.required">โปรดระบุวันที่ออกจากงานเพื่อปรับสถานะการออกจากงาน</div>
                                </div>
                            </div> -->
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-12 col-md-3">
                            
                        </div>
                        <div class="col-sm-12 col-md-3">
                            <label>ใบอนุญาตเลขที่ </label>
                            <div class="form-group">
                                <input type="text" formControlName="permit_card_no" class="form-control" placeholder="">
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-3">
                            <label>วันออกบัตรอนุญาต </label>
                            <div class="row">
                                <div class="col-3">
                                    <select class="form-control" formControlName="permit_card_start_date_d" placeholder="">
                                        <option *ngFor="let item of dayList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                                <div class="col-4">
                                    <select class="form-control" formControlName="permit_card_start_date_m" placeholder="">
                                        <option *ngFor="let item of monthList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                                <div class="col-3">
                                    <select class="form-control" formControlName="permit_card_start_date_y" placeholder="">
                                        <option *ngFor="let item of yearList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-12 col-md-3">
                            <label>วันสิ้นอายุบัตรอนุญาต </label>
                            <div class="row">
                                <div class="col-3">
                                    <select class="form-control" formControlName="permit_card_end_date_d" placeholder="">
                                        <option *ngFor="let item of dayList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                                <div class="col-4">
                                    <select class="form-control" formControlName="permit_card_end_date_m" placeholder="">
                                        <option *ngFor="let item of monthList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                                <div class="col-3">
                                    <select class="form-control" formControlName="permit_card_end_date_y" placeholder="">
                                        <option *ngFor="let item of yearExpiredList" value="{{item.key}}">{{item.description}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    </fieldset>
                    <fieldset class="border p-2">
                        <legend  class="w-auto legend-header" style="text-align: left;color: #1ab196;font-weight: bold;"> ข้อมูลผู้แนะนำ</legend>
                        <div class="row">
                            <div *ngIf="isUpdateShare" class="col-sm-12 col-md-2">
                                <button class="btn btn-success" (click)="openModalRecommender()">
                                    <i class="icon-user" aria-hidden="true"></i>
                                    เลือกผู้แนะนำ
                                </button>
                            </div>
                            <div *ngIf="recommender" class="col-sm-12 col-md-4">
                                <label>วันที่เริ่มหุ้นลอย </label>
                                <div class="row">
                                    <div class="col-3">
                                        <select class="form-control" [disabled]="reasonLeaveWorkList.length > 1" [(ngModel)]="shareStartDateD" placeholder="วัน" [ngModelOptions]="{standalone: true}">
                                            <option *ngFor="let item of dayList" value="{{item.key}}">{{item.description}}</option>
                                        </select>
                                    </div>
                                    <div class="col-4">
                                        <select class="form-control" [disabled]="reasonLeaveWorkList.length > 1" [(ngModel)]="shareStartDateM" placeholder="เดือน" [ngModelOptions]="{standalone: true}">
                                            <option *ngFor="let item of monthList" value="{{item.key}}">{{item.description}}</option>
                                        </select>
                                    </div>
                                    <div class="col-3">
                                        <select class="form-control" [disabled]="reasonLeaveWorkList.length > 1" [(ngModel)]="shareStartDateY" placeholder="ปี" [ngModelOptions]="{standalone: true}">
                                            <option *ngFor="let item of yearList" value="{{item.key}}">{{item.description}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br/>
                        <div *ngIf="recommender && recommender.status != 'delete' " class="row">
                            <div class="col-sm-12 col-md-3">
                                <label>ชื่อ-นามสกุล : </label> {{recommender.prefix}}{{recommender.first_name}} {{recommender.last_name}}
                            </div>
                            <div class="col-sm-12 col-md-2">
                                <label>เลขบัตรประชาชน : </label> {{recommender.identity_no}}
                            </div>
                            <div class="col-sm-12 col-md-2">
                                <label>เบอร์โทรศัพท์ : </label> {{recommender.mobile}}
                            </div>
                            <div class="col-sm-12 col-md-4">
                                <label>ที่อยู่ : </label> {{recommender.address_detail}}
                            </div>
                            <div class="col-sm-12 col-md-1">
                                <button *ngIf="isUpdateShare" type="button" class="btn btn-rounded btn-danger" (click)="deleteRecommender()">
                                    <i class="fa fa-minus"></i>
                                </button>
                            </div>
                        </div>
                    </fieldset>
                    <fieldset class="border p-2 bg-tis-emp">
                        <legend  class="w-auto legend-header" style="text-align: left;color: #1ab196;font-weight: bold;"> ค่าขึ้นทะเบียน</legend>
                        <div class="row">
                            <div class="col-sm-12 col-md-3">
                                <div class="form-group">
                                    <label>จำนวนเงิน </label>
                                    <div class="form-group">
                                        <input type="number" formControlName="registration_amount" class="form-control" placeholder="">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-3">
                                <div class="form-group">
                                    <label>จำนวนงวดแบ่งจ่าย</label>
                                    <div class="form-group">
                                        <input type="number" formControlName="registration_ins_paid" class="form-control" placeholder="">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-3">
                                <div class="form-group">
                                    <label>งวดละ</label>
                                    <div class="form-group">
                                        <input type="number" formControlName="registration_per_paid" class="form-control" placeholder="">
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-3">
                                <div class="form-group">
                                    <label>เริ่มจ่าย </label>
                                    <div class="form-group">
                                        <input type="text" class="form-control" formControlName="registration_start_paid_date"
                                    daterangepicker [options]="options" (selected)="selectedRegistrationDate($event, daterange)">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <fieldset class="border p-2">
                        <legend  class="w-auto legend-header" style="text-align: left;color: #1ab196;font-weight: bold;"> ค่าชุดอุปกรณ์</legend>
                        <div class="row" *ngFor="let item of costEquipmentList; index as i">
                            <div class="col-sm-12 col-md-6">
                                <label>รายละเอียด </label>
                                <div class="form-group">
                                    <input type="text" [(ngModel)]="item.detail" [ngModelOptions]="{standalone: true}" class="form-control" >
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-2">
                                <label>ราคา </label>
                                <div class="form-group">
                                    <input type="number" [(ngModel)]="item.price" [ngModelOptions]="{standalone: true}" class="form-control" >
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-1">
                                <button *ngIf="i == 0" type="button" class="btn btn-rounded btn-success" style="margin-top: 28px;" 
                                (click)="addCostEquipmentList()">
                                    เพิ่ม
                                </button>
                                <button *ngIf="i != 0" type="button" class="btn btn-rounded btn-danger" style="margin-top: 28px;" 
                                (click)="removeCostEquipmentList(i)">
                                    ลบ
                                </button>
                            </div>
                        </div>
                    </fieldset>
                    </form>
                  </div>
              </div>
          </div>
      </div>
  </div>


  <div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header card-header-cover-table">
                    <div class="row">
                        <div class="col-9">
                            หมายเหตุเพิ่มเติม
                        </div>
                        <div class="col-3">
                             
                        </div>
                    </div>
                </div>
                <div class="card-body">
                <div class="row">
                    <div class="col-md-10">
                        <textarea rows="5" class="form-control" placeholder="รายละเอียดเหตุเพิ่มเติม" [(ngModel)]="remarkDetail"></textarea>
                    </div>
                    <div class="col-md-2">
                        <input type="button" class="btn btn-success" value="เพิ่ม" (click)="addRemark()"/>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="card col-sm-12 col-md-12">
                        <div class="card-header">รายการหมายเหตุเพิ่มเติม</div>
                        <div class="table-responsive">
                            <table id="company_table" class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th style="width: 10%;" class="center">ลำดับ</th>
                                        <th style="width: 60%;">รายละเอียดหมายเหตุ</th>
                                        <th style="width: 20%;">วันที่บันทึก</th>
                                        <th style="width: 10%;"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of remarkList; index as i">
                                        <td *ngIf="item.isDeleted == false" style="width: 10%;" class="center">{{i+1}}</td>
                                        <td *ngIf="item.isDeleted == false" style="width: 60%;" class="left">{{item.description}}</td>
                                        <td *ngIf="item.isDeleted == false" style="width: 20%;" class="left">
                                            {{item.created_at | date: 'dd/MM/yyyy HH:mm:ss'}}
                                        </td>
                                        <td *ngIf="item.isDeleted == false" style="width: 10%;" class="center">
                                            <a target="blank"><i class="fas fa-edit btn-edit" (click)="editRemark(i)"></i></a>&nbsp;
                                            <i class="fas fa-trash-alt btn-remove" (click)="removeRemark(i)"></i>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header card-header-cover-table">
                    <div class="row">
                        <div class="col-9">
                            ประวัติด้านไม่ดี
                        </div>
                        <div class="col-3">
                             
                        </div>
                    </div>
                </div>
                <div class="card-body">
                  <div class="row">
                    <div class="panel-group col-sm-12 col-md-12">
                        <div class="form-group">
                            <div class="input-group">
                                <div class="col-sm-12 col-md-8">
                                    <div class="form-group">
                                        <label>รายละเอียดประวัติด้านไม่ดี</label>
                                        <textarea rows="3" class="form-control" placeholder="รายละเอียดประวัติด้านไม่ดี" [(ngModel)]="badHistoryDescription"></textarea>
                                    </div>
                                </div>
                                <div class="col-sm-12 col-md-2">
                                    <button class="btn btn-success" style="margin-top: 28px;" (click)="addBadHistory()">
                                        เพิ่ม
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-12">
                        <div class="table-responsive">
                            <table id="company_table" class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th style="width: 10%;" class="center">ลำดับ</th>
                                        <th style="width: 30%;">รายละเอียดประวัติด้านไม่ดี</th>
                                        <th style="width: 50%;">รายการไฟล์หลักฐาน</th>
                                        <th style="width: 10%;"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of badHistoryList; index as i">
                                        <td style="width: 10%;" class="center">{{i+1}}</td>
                                        <td style="width: 30%;" class="left">
                                            <textarea rows="3" class="form-control" placeholder="รายละเอียดประวัติด้านไม่ดี" [(ngModel)]="item.description"></textarea>
                                        </td>
                                        <td style="width: 50%;" class="left">
                                            <div class="row">
                                                <div class="col-sm-12 col-md-2">
                                                    <button class="btn btn-warning" (click)="openModalUpload(item.fileInfoMap)">
                                                        <i class="fa fa-upload" aria-hidden="true"></i>
                                                        อัพโหลด
                                                    </button>
                                                </div>
                                            </div>
                                            <ul>
                                                <li *ngFor="let item of item.fileInfoMap | keyvalue; index as i">
                                                    <a target="_blank" href="{{ item.value.url }}">{{item.value.name_origin}}</a>&nbsp;
                                                    <i class="fas fa-trash-alt btn-remove" (click)="deleteFileBadHistoryProcess(item.value.id)"></i>
                                                </li>
                                            </ul>
                                        </td>
                                        <td style="width: 10%;" class="center">
                                            <button type="button" class="btn btn-rounded btn-danger" (click)="remoteBadHistory(i)">ลบ</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                  </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header card-header-cover-table">
                    <div class="row">
                        <div class="col-9">
                            ข้อมูลเอกสาร
                        </div>
                        <div class="col-3">
                             
                        </div>
                    </div>
                </div>
                <div class="card-body">
                <div class="row">
                    <div class="col-sm-12 col-md-2">
                        <button class="btn btn-success" (click)="openModalUpload(fileInfoMap)">
                            <i class="fa fa-upload" aria-hidden="true"></i>
                            อัพโหลดไฟล์
                        </button>
                    </div>
                </div>
                <div class="row">
                    <div class="card col-sm-12 col-md-12">
                        <div class="card-header">รายการเอกสาร</div>
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th style="width: 10%;" class="center">ลำดับ</th>
                                        <th style="width: 40%;">ชื่อไฟล์</th>
                                        <th style="width: 10%;">เอกสารเข้างานรอบที่</th>
                                        <th style="width: 10%;">วันที่อัพโหลดไฟล์</th>
                                        <th style="width: 10%;"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of fileInfoMap | keyvalue: descOrder; index as i" [ngClass]="{ 'bg-init': item.value.index == 0 , 'bg-palegoldenrod': item.value.index % 2 == 0 }" >
                                        <td style="width: 10%;" class="center">{{i+1}}</td>
                                        <td style="width: 40%;" class="left">{{item.value.name_origin}}</td>
                                        <td style="width: 10%;" class="left">
                                            <span *ngIf="item.value.index == 0">ปัจจุบัน</span>
                                            <span *ngIf="item.value.index != 0">รอบที่ {{item.value.index}}</span>
                                        </td>
                                        <td style="width: 10%;" class="left">{{item.value.created_at | date: 'dd/MM/yyyy HH:mm:ss'}}</td>
                                        <td style="width: 10%;" class="center">
                                            <a type="button" class="btn btn-rounded btn-info" title="โหลดเอกสาร" target="_blank"
                                            href="{{ item.value.url }}">
                                                <i class="fa fas fa-download"></i></a>
                                            <button type="button" class="btn btn-rounded btn-danger" (click)="deleteFileProcess(item.value.id)">
                                                <i class="fa fa-minus"></i></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid" *ngIf="isHr">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header card-header-cover-table">
                    <div class="row">
                        <div class="col-9">
                            ข้อมูลเอกสารสำคัญ
                        </div>
                        <div class="col-3">
                             
                        </div>
                    </div>
                </div>
                <div class="card-body">
                <div class="row">
                    <div class="col-sm-12 col-md-2">
                        <button class="btn btn-success" (click)="openModalUploadImportantDocument(fileImportantMap)">
                            <i class="fa fa-upload" aria-hidden="true"></i>
                            อัพโหลดไฟล์
                        </button>
                    </div>
                </div>
                <div class="row">
                    <div class="card col-sm-12 col-md-12">
                        <div class="card-header">รายการเอกสารสำคัญ</div>
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th style="width: 10%;" class="center">ลำดับ</th>
                                        <th style="width: 40%;">ชื่อไฟล์</th>
                                        <th style="width: 10%;">วันที่อัพโหลดไฟล์</th>
                                        <th style="width: 10%;"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of fileImportantMap | keyvalue: descOrder; index as i" [ngClass]="{ 'bg-init': item.value.index == 0 , 'bg-palegoldenrod': item.value.index % 2 == 0 }" >
                                        <td style="width: 10%;" class="center">{{i+1}}</td>
                                        <td style="width: 40%;" class="left">{{item.value.name_origin}}</td>
                                        <td style="width: 10%;" class="left">{{item.value.created_at | date: 'dd/MM/yyyy HH:mm:ss'}}</td>
                                        <td style="width: 10%;" class="center">
                                            <a type="button" class="btn btn-rounded btn-info" title="โหลดเอกสาร" target="_blank"
                                            href="{{ item.value.url }}">
                                                <i class="fa fas fa-download"></i></a>
                                            <button type="button" class="btn btn-rounded btn-danger" (click)="deleteImportantDocumentProcess(item.value.id)">
                                                <i class="fa fa-minus"></i></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header card-header-cover-table">
                    <div class="row">
                        <div class="col-9">
                            ประวัติเข้าออกงาน
                        </div>
                        <div class="col-3">
                             
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row" *ngFor="let item of reasonLeaveWorkList; index as i" >
                        <div class="panel-group col-sm-12 col-md-12">
                        <fieldset class="border p-2">
                            <legend  class="w-auto legend-header" style="text-align: left;color: #1ab196;"> ประวัติเข้าออกงานครั้งที่ {{i+1}}</legend>
                            <div class="row" style="padding-left: 2px;padding-right: 2px;">
                                <div class="card col-sm-12 col-md-3">
                                    วันที่จบการอบรม : {{item.start_work | date: 'dd/MM/yyyy'}}
                                </div>
                                <div class="card col-sm-12 col-md-3">
                                    วันที่ออกจากงาน : {{item.leave_work | date: 'dd/MM/yyyy'}}
                                </div>
                                <div class="card col-sm-12 col-md-6">
                                    เหตุผลที่ออกจากงาน : <textarea class="form-control" rows="3" disabled>{{item.reason}}</textarea>
                                </div>
                            </div>
                            <div class="row" style="padding-left: 2px;padding-right: 2px;">
                                <div class="card col-sm-12 col-md-12">
                                    <div class="card-header">รายการหลักฐาน</div>
                                    <div class="table-responsive">
                                        <table id="company_table" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th style="width: 10%;" class="center">ลำดับ</th>
                                                    <th style="width: 40%;">ชื่อไฟล์</th>
                                                    <th style="width: 10%;">วันที่อัพโหลดไฟล์</th>
                                                    <th style="width: 10%;"></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let item of item.fileInfoMap | keyvalue; index as i">
                                                    <td style="width: 10%;" class="center">{{i+1}}</td>
                                                    <td style="width: 40%;" class="left">{{item.value.name_origin}}</td>
                                                    <td style="width: 10%;" class="left">{{item.value.created_at | date: 'dd/MM/yyyy HH:mm:ss'}}</td>
                                                    <td style="width: 10%;" class="center">
                                                        <a type="button" class="btn btn-rounded btn-info" title="โหลดเอกสาร" target="_blank" href="{{ item.value.url }}">
                                                            <i class="fa fas fa-download"></i></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-sm-12 col-md-12 text-center">
        <button *ngIf="status == null" type="button" class="btn btn-rounded btn-success" (click)="saveEmployee(editForm.value)">บันทึก</button>
        <button *ngIf="status == 'A'" type="button" class="btn btn-rounded btn-success" (click)="openModalLeaveWork()">บันทึกออกจากงาน <i class="fas fa-sign-out-alt"></i></button>
        <button *ngIf="status == 'O'" type="button" class="btn btn-rounded btn-success" (click)="saveEmployee(editForm.value)">บันทึกกลับเข้าทำงาน <i class="fas fa-sign-in-alt"></i></button>
        <button *ngIf="status == 'P'" type="button" class="btn btn-rounded btn-success" (click)="saveEmployee(editForm.value)">บันทึกจบอบรม <i class="fas fa-sign-in-alt"></i></button>
        <button type="button" class="btn btn-rounded btn-dark" (click)="backPage()">กลับ</button>
    </div>
</div>


<!-- Start Modal Delete -->
<div class="modal" id="modal-remove" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body center remove-modal-bg-content">
                <i class="fa fa-exclamation-circle warnnig-remove-icon" aria-hidden="true"></i><br />
                <span class="warnnig-remove-text">
                    คุณต้องการลบเอกสารนี้
                </span>
            </div>
            <div class="modal-footer center">
                    <button type="button" class="btn btn-danger" (click)="remoteFile(currentIdFile)">ยืนยัน</button>&nbsp;
                    <button type="button" class="btn btn-light" data-dismiss="modal">ยกเลิก</button>
            </div>
        </div>
    </div>
</div>
<!-- End Modal Delete -->

<!-- Start Modal Delete -->
<div class="modal" id="modal-remove-bad-history" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body center remove-modal-bg-content">
                <i class="fa fa-exclamation-circle warnnig-remove-icon" aria-hidden="true"></i><br />
                <span class="warnnig-remove-text">
                    คุณต้องการลบไฟล์หลักฐานนี้
                </span>
            </div>
            <div class="modal-footer center">
                    <button type="button" class="btn btn-danger" (click)="remoteFileBadHistory(currentIdFile)">ยืนยัน</button>&nbsp;
                    <button type="button" class="btn btn-light" data-dismiss="modal">ยกเลิก</button>
            </div>
        </div>
    </div>
</div>
<!-- End Modal Delete -->

<!-- Start Modal Upload -->
<div class="modal" id="modal-upload" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header modal-header-edit">
                <h4 class="modal-title" id="exampleModalLabel1">อัพโหลดไฟล์</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="panel-group col-sm-12 col-md-12">
                            <div class="form-group">
                                <div class="input-group">
                                  <div *ngFor="let progressInfo of progressInfos" class="col-sm-12 col-md-12" style="margin-bottom: 10px;">
                                      <span>{{ progressInfo.fileName }}</span>
                                      <div class="progress" style="height: 40%;">
                                          <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar"
                                              attr.aria-valuenow="{{ progressInfo.value }}"
                                              aria-valuemin="0"
                                              aria-valuemax="100"
                                              [ngStyle]="{ width: progressInfo.value + '%' }">
                                              {{ progressInfo.value }}%
                                          </div>
                                      </div>
                                  </div>
                                  <div class="col-sm-12 col-md-3">
                                      <div class="form-group">
                                          <label>ชื่อเอกสาร</label>
                                          <input type="text" class="form-control" placeholder="ชื่อเอกสาร" [(ngModel)]="nameFile">
                                      </div>
                                  </div>
                                  <div class="col-sm-12 col-md-5">
                                      <div class="form-group">
                                          <label>เลือกไฟล์เอกสาร</label>
                                          <input type="file" class="form-control" multiple (change)="selectFiles($event)" />
                                      </div>
                                  </div>
                                  <div class="col-sm-12 col-md-2">
                                      <button class="btn btn-success" [disabled]="!selectedFiles" style="margin-top: 28px;" (click)="uploadFiles()">
                                          อัพโหลดไฟล์
                                      </button>
                                  </div>
                                </div>
                            </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-rounded btn-light" data-dismiss="modal">ปิด</button>
            </div>
        </div>
    </div>
</div>
<!-- End Modal Upload -->

<!-- Start Modal Upload -->
<div class="modal" id="modal-upload-important-document" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header modal-header-edit">
                <h4 class="modal-title" id="exampleModalLabel1">อัพโหลดไฟล์</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="panel-group col-sm-12 col-md-12">
                            <div class="form-group">
                                <div class="input-group">
                                  <div *ngFor="let progressInfo of progressInfosImportantDocument" class="col-sm-12 col-md-12" style="margin-bottom: 10px;">
                                      <span>{{ progressInfo.fileName }}</span>
                                      <div class="progress" style="height: 40%;">
                                          <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar"
                                              attr.aria-valuenow="{{ progressInfo.value }}"
                                              aria-valuemin="0"
                                              aria-valuemax="100"
                                              [ngStyle]="{ width: progressInfo.value + '%' }">
                                              {{ progressInfo.value }}%
                                          </div>
                                      </div>
                                  </div>
                                  <div class="col-sm-12 col-md-3">
                                      <div class="form-group">
                                          <label>ชื่อเอกสาร</label>
                                          <input type="text" class="form-control" placeholder="ชื่อเอกสาร" [(ngModel)]="nameFileImportantDocument">
                                      </div>
                                  </div>
                                  <div class="col-sm-12 col-md-5">
                                      <div class="form-group">
                                          <label>เลือกไฟล์เอกสาร</label>
                                          <input type="file" class="form-control" multiple (change)="selectFilesImportantDocument($event)" />
                                      </div>
                                  </div>
                                  <div class="col-sm-12 col-md-2">
                                      <button class="btn btn-success" [disabled]="!selectedFilesImportantDocument" style="margin-top: 28px;" (click)="uploadFilesImportantDocument()">
                                          อัพโหลดไฟล์
                                      </button>
                                  </div>
                                </div>
                            </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-rounded btn-light" data-dismiss="modal">ปิด</button>
            </div>
        </div>
    </div>
</div>
<!-- End Modal Upload -->

<!-- Start Modal Delete -->
<div class="modal" id="modal-remove-important-document" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body center remove-modal-bg-content">
                <i class="fa fa-exclamation-circle warnnig-remove-icon" aria-hidden="true"></i><br />
                <span class="warnnig-remove-text">
                    คุณต้องการลบเอกสารนี้
                </span>
            </div>
            <div class="modal-footer center">
                    <button type="button" class="btn btn-danger" (click)="remoteFileImportantDocumentProcess()">ยืนยัน</button>&nbsp;
                    <button type="button" class="btn btn-light" data-dismiss="modal">ยกเลิก</button>
            </div>
        </div>
    </div>
</div>
<!-- End Modal Delete -->

<!-- Start Modal Leave Work -->
<div class="modal" id="modal-leave-work" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header modal-header-edit">
                <h4 class="modal-title" id="exampleModalLabel1">บันทึกออกจากงาน</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="panel-group col-sm-12 col-md-12">
                        <div class="form-group">
                            <div class="input-group">
                              <div class="col-sm-12 col-md-6">
                                  <div class="form-group">
                                      <label>เหตุผลที่ออกจากงาน <span class="star-required">*</span></label>
                                      <textarea class="form-control" id="reason" rows="3" [(ngModel)]="reason" 
                                      [ngClass]="{ 'is-invalid': invalidReason }"></textarea>
                                      <div *ngIf="invalidReason" class="text-danger">
                                        <div>โปรดระบุเหตุผลที่ออกจากงาน</div>
                                    </div>
                                  </div>
                              </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="panel-group col-sm-12 col-md-12">
                            <div class="form-group">
                                <div class="input-group">
                                  <div *ngFor="let progressInfo of progressInfos" class="col-sm-12 col-md-12" style="margin-bottom: 10px;">
                                      <span>{{ progressInfo.fileName }}</span>
                                      <div class="progress" style="height: 40%;">
                                          <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar"
                                              attr.aria-valuenow="{{ progressInfo.value }}"
                                              aria-valuemin="0"
                                              aria-valuemax="100"
                                              [ngStyle]="{ width: progressInfo.value + '%' }">
                                              {{ progressInfo.value }}%
                                          </div>
                                      </div>
                                  </div>
                                  <div class="col-sm-12 col-md-3">
                                      <div class="form-group">
                                          <label>ชื่อเอกสาร</label>
                                          <input type="text" class="form-control" placeholder="ชื่อเอกสาร" [(ngModel)]="nameFile">
                                      </div>
                                  </div>
                                  <div class="col-sm-12 col-md-5">
                                      <div class="form-group">
                                          <label>เลือกไฟล์เอกสาร</label>
                                          <input type="file" class="form-control" multiple (change)="selectFiles($event)" />
                                      </div>
                                  </div>
                                  <div class="col-sm-12 col-md-2">
                                      <button class="btn btn-success" [disabled]="!selectedFiles" style="margin-top: 28px;" (click)="uploadFiles()">
                                          อัพโหลดไฟล์
                                      </button>
                                  </div>
                                </div>
                            </div>
                    </div>
                </div>
                <div class="row" style="padding-left: 2px;padding-right: 2px;">
                    <div class="card col-sm-12 col-md-12">
                        <div class="card-header">รายการหลักฐาน</div>
                        <div class="table-responsive">
                            <table id="company_table" class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th style="width: 10%;" class="center">ลำดับ</th>
                                        <th style="width: 40%;">ชื่อไฟล์</th>
                                        <th style="width: 10%;">วันที่อัพโหลดไฟล์</th>
                                        <th style="width: 10%;"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of fileInfoLeaveWorkMap | keyvalue; index as i">
                                        <td style="width: 10%;" class="center">{{i+1}}</td>
                                        <td style="width: 40%;" class="left">{{item.value.name_origin}}</td>
                                        <td style="width: 10%;" class="left">{{item.value.created_at | date: 'dd/MM/yyyy HH:mm:ss'}}</td>
                                        <td style="width: 10%;" class="center">
                                            <a type="button" class="btn btn-rounded btn-info" title="โหลดเอกสาร" target="_blank" href="{{ item.value.url }}">
                                                <i class="fa fas fa-download"></i></a>
                                            <button type="button" class="btn btn-rounded btn-danger" (click)="remoteLeaveWorkFile(item.value.id)">
                                                <i class="fa fa-minus"></i></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-rounded btn-success" (click)="updateLeaveWork()">บันทึก</button>
                <button type="button" class="btn btn-rounded btn-light" data-dismiss="modal">ปิด</button>
            </div>
        </div>
    </div>
</div>
<!-- End Modal Leave Work -->

<!-- Start Modal Edit Remark -->
<div class="modal" id="modal-edit-remark" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header modal-header-edit">
                <h4 class="modal-title" id="exampleModalLabel1">แก้ไขหมายเหตุ</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="panel-group col-sm-12 col-md-12">
                        <textarea rows="5" class="form-control" placeholder="รายละเอียดเหตุเพิ่มเติม" [(ngModel)]="remarkEdit"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-rounded btn-success" (click)="updateRemark()">แก้ไข</button>
                <button type="button" class="btn btn-rounded btn-light" data-dismiss="modal">ปิด</button>
            </div>
        </div>
    </div>
</div>
<!-- End Modal Upload -->


<!-- Start Modal Recommender -->
<div class="modal" id="modal-recommender" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header modal-header-add">
                <h4 class="modal-title" id="exampleModalLabel1">ผู้แนะนำ</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="panel-group col-sm-12 col-md-4">
                        <div class="form-group">
                            <label>ประเภทผู้แนะนำ</label>
                            <select class="form-control" (change)="selectRecommenderType($event.target.value)">
                                <option value="" [selected]="true">--- เลือกประเภทผู้แนะนำ ---</option>
                                <option value="SG">รปภ.</option>
                                <option value="IF">พนักงานภายใน</option>
                                <option value="OS">บุคคลภายนอก</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="panel-group col-sm-12 col-md-12">
                        <div class="table-responsive">
                            <table id="recommender_table" class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th style="width: 5%;" class="center">ลำดับ</th>
                                        <th style="width: 20%;">ชื่อ-นามสกุล</th>
                                        <th style="width: 15%;">เลขบัตรประชาชน</th>
                                        <th style="width: 15%;">เบอร์โทรศัพท์</th>
                                        <th style="width: 35%;">ที่อยู่</th>
                                        <th style="width: 10%;" class="center"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of recommenderList; index as i">
                                        <td style="width: 5%;" class="center">{{i+1}}</td>
                                        <td style="width: 20%;" class="left">{{item.prefix}}{{item.first_name}} {{item.last_name}}</td>
                                        <td style="width: 15%;" class="left">{{item.identity_no}}</td>
                                        <td style="width: 15%;" class="left">{{item.mobile}}</td>
                                        <td style="width: 35%;" class="left">{{item.address_detail}}</td>
                                        <td style="width: 10%;" class="center">
                                            <button type="button" class="btn btn-rounded btn-success" (click)="selectRecommender(item)">เลือก</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-rounded btn-light" data-dismiss="modal">ปิด</button>
            </div>
        </div>
    </div>
</div>
<!-- End Modal Recommender -->